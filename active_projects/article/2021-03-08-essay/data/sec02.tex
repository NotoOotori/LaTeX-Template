% !TeX root = ../main.tex

\section{代数}

这一部分将以域的多项式函数整环为原型, 发展本文中所需要用到的代数基础, 主要包括局部化, 准素分解, 维数理论, 素谱等内容.

\subsection{环与理想}

这一节中我们将要给出环和理想的基本概念, 以及理想的一些运算. 在本节的最后, 我们将介绍模与代数的概念. 本文中不会以模作为主要工具, 但是引入其定义可以方便某些定理的叙述.

设$A$为非空集合, 若在$A$中有两个二元运算(加法和乘法), 满足
\begin{enumerate}
    \item $A$关于加法构成Abel群, 即
    \begin{enumerate}
        \item $A$的加法满足结合律与交换律,
        \item 存在$0\in A$, 使得对任意的$x\in A$都有$0+x=x$成立,
        \item 对于任意的$x\in A$, 存在$-x\in A$使得$x+(-x)=0$成立;
    \end{enumerate}
    \item $A$的乘法满足结合律与交换律;
    \item 存在$1\in A$, 使得对于任意的$x\in A$都有$1x=x$成立,
\end{enumerate}
则称$A$为\emph{交换幺环}. 后文中\emph{环}指的都是交换幺环. 注意如果$1=0$, 则环中有且仅有一个元素, 称这样的环为\emph{零环}\footnotemark .
\footnotetext{需要注意的是, 在之后的一些定义中会排除零环, 比如说整环, 域等概念.}

研究保持代数结构的映射为代数理论的核心, 而保持环结构的映射即为环同态, 定义如下. 设$A, B$是两个环, 若映射$f\colon A\to B$满足
\begin{enumerate}
    \item $f(x+y)=f(x)+f(y)$(即$f$为群同态, 同时还有$f(0)=0$与$f(-x)=-f(x)$成立);
    \item $f(xy)=f(x)f(y)$;
    \item $f(1)=1$,
\end{enumerate}
则称$f$为从$A$到$B$的\emph{环同态}.

理想在环论中的作用类似于正规子群在群论中的作用, 一个环可以与其理想做商得到商环, 商环中的理想与原来环中的理想有对应关系, 可以以此来简化问题. 设$A$为环, 如果$A$的子集$\ideal{a}$满足
\begin{enumerate}
    \item $\ideal{a}$为$A$的加法子群;
    \item 若$x\in A, y\in\ideal{a}$, 则$xy\in\ideal{a}$,
\end{enumerate}
则称$\ideal{a}$为$A$的\emph{理想}. 若$\ideal{a}\neq A$, 则称$\ideal{a}$为\emph{真理想}\footnotemark .
\footnotetext{与零环的情况相对应, 同样需要注意之后的一些定义中会只考虑真理想, 比如说素理想, 极大理想等概念, 为了保证素理想(极大理想)与整环(域)对应的简洁性.}

设$B$为环$A$的子集, 则定义$B$\emph{生成的理想}为$A$中包含$B$的(在包含意义下)最小的理想, 该理想$=\{\sum_{j=1}^n x_jy_j\vert n\in\ZZ_+, x_j\in A, y_j\in B\}$. 由有限个元素$x_1, \dotsc, x_n$生成的理想记为$(x_1, \dotsc, x_n)$, 由一个元素$x$生成的理想记为$(x)$, 称可以由有限个元素生成的理想\emph{有限生成理想}, 称可以由一个元素生成的理想为\emph{主理想}.

商群$A{\divslash} \ideal{a}$有从$A$诱导的自然的环结构, 其中乘法由$(x+\ideal{a})(y+\ideal{a})=xy+\ideal{a}$定义. 称环$A{\divslash}\ideal{a}$为$A$对$\ideal{a}$的\emph{商环}. 有一个从环到其商环的自然的\emph{投影映射}$\pi\colon A\to A{\divslash}\ideal{a}$, 满足$\pi(x)=x+\ideal{a}$, 为满环同态. 商环有如下的\emph{泛性质}\parencite[5]{altman_term_2017}, 给定环$A$和$A$的理想$\ideal{a}$, 对于任意的环$B$以及核包含$\ideal{a}$的环同态$\phi\colon A\to B$, 存在唯一的环同态$\psi\colon A{\divslash}\ideal{a}\to B$使得$\psi\pi=\phi$成立, 并且满足该泛性质的环$A{\divslash}\ideal{a}$在同构意义下唯一.

\begin{proposition}[{{\parencite[2, Proposition 1.1]{atiyah_introduction_1969}}}]\label{prop:quotidealcorr}
    设$\ideal{a}$为环$A$的理想, 则$A$中包含$\ideal{a}$的理想全体与$A{\divslash}\ideal{a}$中的理想全体有由投影映射$\pi$诱导出的保序双射($\ideal{b}\leftrightarrow\ideal{b}{\divslash}\ideal{a}$).
\end{proposition}

\begin{proof}
    保序显然, 再验证$\pi$将$A$中包含$\ideal{a}$的理想映到$A{\divslash}\ideal{a}$中的理想, $\pi^{-1}$将$A{\divslash}\ideal{a}$中的理想映到$A$中包含$\ideal{a}$的理想, 并且两者互为逆.
\end{proof}

\begin{remark}
    由于\thref{prop:quotidealcorr}的成立, 在不致引起混淆的情况下我们会将$A$中包含$\ideal{a}$的某一个理想同时看作$A{\divslash}\ideal{a}$的理想而不另加说明, 反之亦然.
\end{remark}

% TODO: https://proofwiki.org/wiki/Third_Isomorphism_Theorem/Rings
\begin{proposition}[第三同构定理{{\parencite[126, Theorem 2.12 (ii)]{hungerford_algebra_1974}}}]\label{prop:thirdisomorphism}
    设$A$为环, $\ideal{a}\subseteq\ideal{b}$为$A$的两个理想, 则$\ideal{b}{\divslash}\ideal{a}$是商环$A{\divslash}\ideal{a}$的理想, 并且有$(A{\divslash}\ideal{a}){\divslash}(\ideal{b}{\divslash}\ideal{a})\cong A{\divslash}\ideal{b}$.
\end{proposition}

\begin{proof}

\end{proof}

对于环$A$的元素$x$, 如果存在$y\neq 0$使得$xy=0$, 则称$x$为\emph{零因子}. 如果非零环$A$中没有非零零因子, 则称环$A$为\emph{整环}. 对于$x\in A$, 如果存在整数$n>0$使得$x^n = 0$, 则称$x$为\emph{幂零元}. 幂零元为零因子, 反过来则不一定成立. 如果$x\in A$关于乘法可逆, 即存在$y\in A$使得$xy=1$, 则称$x$为\emph{单位}, 此时这样的$y$唯一, 记为$x^{-1}$. 环$A$的单位全体关于乘法有Abel群的结构. 如果环$A$非零, 且每个非零元都是单位, 则称$A$为\emph{域}.

如果环$A$的真理想$\ideal{p}$满足如果$xy\in\ideal{p}$那么$x\in \ideal{p}$或者$y\in\ideal{p}$成立, 则称$\ideal{p}$为\emph{素理想}; 如果环$A$的理想$\ideal{m}$为$A$的真理想全体(在包含意义下)的极大元, 则称$\ideal{m}$为\emph{极大理想}. 素理想有一些很好的性质.

\begin{proposition}[{{\parencite[8, Proposition 1.11]{atiyah_introduction_1969}}}]\label{prop:prime}\leavevmode
    \begin{enumerate}
        \item\label{enum:prop-prime-avoid}(素回避引理) 设$\ideal{p}_1, \dotsc, \ideal{p}_n$为素理想, 理想$\ideal{a}\subseteq\bigcup_{j=1}^n\ideal{p}_j$, 则存在$j$使得$\ideal{a}\subseteq \ideal{p}_j$;
        \item\label{enum:prop-prime-absorb}(素吸收引理) 设$\ideal{a}_1, \dotsc, \ideal{a}_n$为理想, 素理想$\ideal{p}\supseteq\bigcap_{j=1}^n\ideal{a}_j$, 则存在$j$使得$\ideal{p}\supseteq\ideal{a}_j$. 如果进一步地有$\ideal{p}=\bigcap_{j=1}^n\ideal{a}_j$, 那么存在$j$使得$\ideal{p}=\ideal{a}_j$.
    \end{enumerate}
\end{proposition}

\begin{proof}
    \ref{enum:prop-prime-avoid} 考虑逆否命题, 如果对于任意的$j=1, \dotsc, n$都有$\ideal{a}\nsubseteq\ideal{p}_j$, 那么有$\ideal{a}\nsubseteq\bigcup_{j=1}^n\ideal{p}_j$. 对$n$进行归纳, 当$n=1$时命题显然成立, 假设命题对于$n-1$成立. 根据归纳假设, 对于每个$j=1, \dotsc, n$都存在$x_j\in \ideal{a}$但对于$k\neq j$都有$x_j\notin\ideal{p}_k$, 我们只需要证明对于其中某个$x_j$有$x_j\notin\ideal{p}_j$即可. 反证, 考查$x=\sum_{j}(\prod_{k\neq j}x_k)$, 有$x\in\ideal{a}$但$x$不是任何一个$\ideal{p}_j$的元素, 得到矛盾.

    \ref{enum:prop-prime-absorb} 证明第一个命题的逆否命题, 如果对于任意的$j$都有$\ideal{p}\nsubseteq\ideal{a}_j$, 则存在$x_j\in\ideal{a}_j$但$x_j\notin\ideal{p}$, 于是$x=\prod_j x_j$满足$x\in\bigcap_j\ideal{a}_j$但是$x\notin\ideal{p}$, 即得证$\ideal{p}\nsupseteq\bigcap_{j=1}^n\ideal{a}_j$.
\end{proof}

素理想和极大理想有等价定义
\begin{equation*}
    \begin{aligned}
        \ideal{p}\text{为素理想}&\Leftrightarrow A{\divslash}\ideal{p}\text{是整环};\\
        \ideal{m}\text{为极大理想}&\Leftrightarrow A{\divslash}\ideal{m}\text{是域}.
    \end{aligned}
\end{equation*}
因此素理想为极大理想, 而Zorn引理\footnotemark 可以保证非零环中极大理想的存在性.
\footnotetext{Zorn引理的叙述如下: 如果一个非空偏序集的每个全序子链都有上界, 那么这个偏序集存在极大元. 在\axiom{ZF}公理系统下Zorn引理与选择公理\axiom{AC}等价\parencite[10, Theorem 2.2]{herrlich_axiom_2006}.}

\begin{theorem}[{{\parencite[3, Theorem 1.3]{atiyah_introduction_1969}}}]\label{thm:maxideal}
    每个非零环都存在至少一个极大理想.
\end{theorem}

\begin{proof}
    真包含于$A$的理想全体构成偏序集结构. 对于任意的全序子链$\{\ideal{a}_\lambda\}$, 都有$\bigcup_{\lambda}\ideal{a}_\lambda$是真包含于$A$的理想, 为该全序子链的上界, 故由Zorn引理可得该偏序集中存在极大元, 即环$A$中存在极大理想.
\end{proof}

有的环有且仅有一个极大理想, 称这样的环为\emph{局部环}, 并称局部环对其唯一极大理想的商域为这个环的\emph{剩余域}.

接下来介绍一些理想的运算. 两个理想$\ideal{a}, \ideal{b}$的\emph{和}$\ideal{a}+\ideal{b}=\{x+y\vert x\in\ideal{a}, y\in\ideal{b}\}$是理想. 这是包含$\ideal{a}$和$\ideal{b}$的最小的理想. 两个理想$\ideal{a}, \ideal{b}$的\emph{积}$\ideal{a}\ideal{b}=\{\sum_{j=1}^n x_jy_j\vert n\in\ZZ_+, x_j\in\ideal{a}, y_j\in\ideal{b}\}$是理想. 两个理想$\ideal{a}, \ideal{b}$的\emph{交}$\ideal{a}\cap\ideal{b}$是理想. 定义两个理想$\ideal{a}, \ideal{b}$的\emph{理想商}为$(\ideal{a}{:}\ideal{b})\coloneq \{x\in A\vert xb\subseteq a\}$, 也是一个理想, 这将在\ref{subsec:primdecom}有重要的应用, 特别地, 记理想$\ideal{a}$的\emph{零化理想}为$\Ann(\ideal{a})\coloneq ((0){:}\ideal{a})$. 一个理想$\ideal{a}$的\emph{根}定义为$\sqrt{\ideal{a}}\coloneq \{x\in A\vert \exists n\in\ZZ_+\colon x^n\in\ideal{a}\}$, 也是一个理想. 很显然, 根运算具有保序性, 即如果$\ideal{a}\subseteq\ideal{b}$, 则$\sqrt{\ideal{a}}\subseteq\sqrt{\ideal{b}}$. 如果一个理想$\ideal{a}$为某个理想的根, 则称这个理想$\ideal{a}$为\emph{根理想}. 称零理想$\ideal{a}$的根为环$A$的\emph{幂零根}, 记为$\nil$.

\begin{proposition}[{{\parencite[8, Exercise 12; 9, Exercise 13]{atiyah_introduction_1969}}}]\label{prop:idealop}\leavevmode
    \begin{enumerate}
        \item\label{enum:prop-idealop-quot-firstcap} $(\bigcap_\lambda \ideal{a}_\lambda{:}\ideal{b})=\bigcap_{\lambda}(\ideal{a}_\lambda{:}\ideal{b})$;
        \item $(\ideal{a}{:}\sum_{\lambda}\ideal{b}_\lambda)=\bigcap_{\lambda}(\ideal{a}{:}\ideal{b}_\lambda)$;
        \item\label{enum:prop-idealop-rad-inters} $\sqrt{\ideal{ab}}=\sqrt{\ideal{a}\cap\ideal{b}}=\sqrt{\ideal{a}}\cap\sqrt{\ideal{b}}$.
    \end{enumerate}
\end{proposition}

\begin{proposition}[{{\parencite[9, Proposition 1.14]{atiyah_introduction_1969}}}]\label{prop:scheinnullstellensatz}
    设$\ideal{a}$为环$A$的理想, 则$\sqrt{\ideal{a}}$等于包含$\ideal{a}$的所有素理想的交. 特别地, $A$中所有素理想的交恰为$A$的幂零根.
\end{proposition}

\begin{proof}
    先证$\subseteq$, 这一部分比较直接. 只需证如果$x^n\in\ideal{a}$, 那么$x$属于每个包含$\ideal{a}$的素理想, 这由素理想的定义可简单得出.

    再证$\supseteq$, 这一部分需要用到Zorn引理. 反证, 如果有$f\in A$使得对于任意的$n\in\ZZ_+$都有$f^n\notin\ideal{a}$, 我们需要构造一个素理想$\ideal{p}\supseteq\ideal{a}$使得$f\notin\ideal{p}$. 考虑满足包含$\ideal{a}$并且对于任意$n\in\ZZ_+$都有$x^n\notin\ideal{a}$的理想$\ideal{a}$的全体$\Sigma$, 这构成一个非空偏序集, 满足任意全序子列的并集都是其上界, 故由Zorn引理知$\Sigma$存在极大元, 记极大元为$\ideal{p}$, 现在来证明$\ideal{p}$是素理想. 如果$x, y\notin\ideal{p}$, 则理想$(x)+\ideal{p}$与$(y)+\ideal{p}$不属于$\Sigma$, 由$\ideal{p}$的极大性知存在$m, n\in\ZZ_+$使得$f^m\in (x)+\ideal{p}$并且$f^n\in (y)+\ideal{q}$, 因此$f^{m+n}\in (xy)+\ideal{p}$, 故$(xy)+\ideal{p}\neq\ideal{p}$, 即$xy\notin\ideal{p}$. 于是$\ideal{p}$即为我们想找的素理想.
\end{proof}

理想在环同态作用下的表现也是研究的重点. 给定环同态$f\colon A\to B$, 设$\ideal{a}$为$A$的理想, $\ideal{b}$为$B$的理想. $\ideal{a}$在$f$下的像$f(\ideal{a})$不一定为理想, 定义$\ideal{a}$的\emph{扩张}为$f(\ideal{a})$在$B$中生成的理想, 记作$\ideal{a}^e$. $\ideal{b}$在$f$下的原像$f^{-1}(\ideal{b})$一定是理想, 定义$\ideal{b}$的\emph{收缩}即为$f^{-1}(\ideal{b})$, 记作$\ideal{b}^c$. 若$B$的某个理想可以写成$A$的一个理想的扩张, 则称这个$B$的理想为\emph{扩张理想}, 类似地, 如果$A$的某个理想可以写成$B$的一个理想的收缩, 则称这个$A$的理想为\emph{收缩理想}. 要注意扩张与收缩是相对于$f$而言的, 只不过一般在语境下$f$的选取不会有混淆, 故没有显式提及$f$. 显然扩张与收缩都具有保序性, 即如果$A$的理想$\ideal{a}_1\subseteq\ideal{a}_2$, $B$的理想$\ideal{b}_1\subseteq\ideal{b}_2$, 则$\ideal{a}_1^e\subseteq\ideal{a}_2^e$, $\ideal{b}_1^c\subseteq\ideal{b}_2^c$. 下面一个命题推广了\thref{prop:quotidealcorr}到一般形式.

\begin{proposition}[{{\parencite[10, Proposition 1.17]{atiyah_introduction_1969}}}]\label{prop:extencontrcorr}
    设$f\colon A\to B$为环同态, 有理想$\ideal{a}\subseteq A, \ideal{b}\subseteq B$, 则
    \begin{enumerate}
        \item $\ideal{a}\subseteq\ideal{a}^{ec}, \ideal{b}\supseteq\ideal{b}^{ce}$,
        \item $\ideal{a}=\ideal{a}^{ece}, \ideal{b}=\ideal{b}^{cec}$,
        \item\label{enum:prop-ec-corr} $A$的收缩理想全体与$B$的扩张理想全体有保序双射($\ideal{a}\mapsto\ideal{a}^e, \ideal{b}^c\mapsfrom\ideal{b}$).
    \end{enumerate}
\end{proposition}

\begin{proposition}[{{\parencite[10, Proposition 1.17]{atiyah_introduction_1969}}}]\label{prop:extencontrop}
    设$\ideal{a}, \ideal{a}_1, \ideal{a}_2$为环$A$的理想, $\ideal{b}, \ideal{b}_1, \ideal{b}_2$为环$B$的理想, 则
    \begin{equation*}
        \begin{aligned}
            &(\ideal{a}_1+\ideal{a}_2)^e=\ideal{a}_1^e+\ideal{a}_2^e,
            &&\qquad(\ideal{b}_1+\ideal{b_2})^c\supseteq \ideal{b}_1^c+\ideal{b}_2^c,\\
            &(\ideal{a}_1\cap\ideal{a}_2)^e\subseteq\ideal{a}_1^e\cap\ideal{a}_2^e,
            &&\qquad(\ideal{b}_1\cap\ideal{b_2})^c= \ideal{b}_1^c\cap\ideal{b}_2^c,\\
            &(\ideal{a}_1\ideal{a}_2)^e=\ideal{a}_1^e\ideal{a}_2^e,
            &&\qquad(\ideal{b}_1\ideal{b_2})^c\supseteq\ideal{b}_1^c\ideal{b}_2^c,\\
            &(\ideal{a}_1{:}\ideal{a}_2)^e\subseteq\ideal{a}_1^e{:}\ideal{a}_2^e,
            &&\qquad(\ideal{b}_1{:}\ideal{b_2})^c= \ideal{b}_1^c{:}\ideal{b}_2^c,\\
            &\sqrt{\ideal{a}}^e\subseteq\sqrt{\ideal{a}^e},
            &&\qquad\sqrt{\ideal{b}}^c= \sqrt{\ideal{b}^c}.
        \end{aligned}
    \end{equation*}
\end{proposition}

我们需要有限生成模, 有限生成代数等概念来简化记号. 设$A$为环, $M$为Abel群, 如果给定环同态$\mu\colon A\to \Aut(M)$, 则称$M$为$A$-\emph{模}, 习惯上记$\mu(a)(x)$为$ax$, 其中$a\in A, x\in M$. 若$T\subseteq M$为$A$-模$M$的子集, 则称$T$\emph{生成的子模}$N$为包含$T$的最小子模, 有显式表达$N=\{\sum_{j=1}^m a_jx_j\vert m\in\ZZ_+, a_j\in A, x_j\in T\}$, 同时称可由有限子集生成的$A$-模为\emph{有限生成$A$-模}. 设$A, B$为环, 如果给定环同态$\nu\colon A\to B$, 则称$B$为$A$-\emph{代数}, $\nu$诱导了$B$的$A$-模结构, 由$ax\coloneq \nu(a)x$给出. 在不另加说明的情况下, $A$-代数的$A$-模结构默认为此, 若这个模结构是有限生成的, 则称$B$为\emph{有限$A$代数}. 如果$T=\{x_1, \dotsc, x_n\}$为$A$-代数$B$的有限子集, 则称$T$\emph{生成的子代数}$C$为包含$T$的最小子代数, 有显式表达$C=\{f(x_1, \dotsc, x_n)\vert f\in A[X_1, \dotsc, X_n]\}$, 同时称可由有限子集生成的$A$-代数为\emph{有限生成$A$-代数}. 如果环$A\subseteq B$, 则$B$有由嵌入映射诱导出的自然的$A$-代数结构, 我们将默认使用这个结构而不另加说明. 下面是几个关于有限代数和有限生成代数的基本事实.

\begin{proposition}
    设$\field{k}\subseteq\field{K}$为域, 则$\field{K}$为$\field{k}$的有限代数域扩张当且仅当$\field{K}$为有限$\field{k}$-代数.
\end{proposition}

\begin{proposition}[{{\parencite[52, Theorem 4.5]{atiyah_introduction_1969}}}]\label{prop:fgalgebra}
    设$A$为环, $B$为$A$-代数, 则$B$为有限生成$A$-代数当且仅当存在$n\in \ZZ$使得$B$为多元多项式环$A[X_1, \dotsc, X_n]$的商环.
\end{proposition}

\subsection{分式环与局部化}

分式环以及与之相关的局部化可以说是交换代数中最重要的技术之一了. 与商环类似, 分式环也可以对环进行简化, 商环保留包含给定理想的理想, 分式环保留包含于给定集合的理想. 在()%TODO: localization
中, 我们可以看到局部化的几何意义, 为研究在某个邻域或在某个点处的情况.

若环$A$的子集$S$包含单位元1, 并且满足关于乘法封闭, 即对于任意的$x, y\in S$都有$xy\in S$成立, 则称$S$为$A$的\emph{乘法闭集}. 在$A\times S$上定义等价关系${\sim}$, $(a, s)\sim (b, t)$当且仅当存在$u\in S$使得$u(at-bs)=0$成立, 记$A\times S$在该等价关系下的商为$S^{-1}A$. 在$S^{-1}A$上定义加法$a{\divslash} s+b{\divslash}t \coloneq  (at+bs){\divslash}(st)$以及乘法$(a{\divslash}s)(b{\divslash}t)=(ab){\divslash}(st)$, 则$S^{-1}A$关于该加法与乘法有环的结构, 称为$A$关于$S$的\emph{分式环}. 有自然同态$f\colon A\to S^{-1}A$将$x$映到$x{\divslash}1$, 注意$f$不一定是单射. 分式环有如下的\emph{泛性质}\parencites[81, Theorem 11.3]{altman_term_2017}[37, Proposition 3.1]{atiyah_introduction_1969}, 给定环$A$, 乘法闭集$S$与之前定义的自然同态$f\colon A\to S^{-1}A$, 对于任意的环$B$以及将$S$中元素映到单位的环同态$\phi\colon A\to B$, 存在唯一的环同态$\psi\colon S^{-1}R\to B$使得$\psi f=\phi$成立, 并且满足该泛性质的环$S^{-1}A$在同构意义下唯一.

接下来考察分式环中理想的扩张与收缩. 设$f\colon A\to S^{-1}A$为之前定义的自然环同态, $\ideal{a}$为$A$的理想, 则$\ideal{a}$的扩张$\ideal{a}^e=S^{-1}\ideal{a}\coloneq \{a{\divslash}s\vert a\in\ideal{a}, s\in S\}$. 在证明主要命题之前我们需要用到商环与分式环之间的关系, 叙述如下.

\begin{proposition}[{{\parencite{ortiz_localization_2019}}}]
    取分式环与取商环可交换. 严格叙述如下, 设$A$为环, $\ideal{a}$为$A$的理想, $S$为$A$的乘法闭集, $\overline{S}=\pi(S)$为$S$在商环$A{\divslash}\ideal{a}$中的像仍为乘法闭集, 则环$\SASa$与环$\SAa$有典范同构, 即该同构与典范同态$A\to S^{-1}A\to \SASa$以及$A\to A{\divslash}\ideal{a}\to \SAa$可交换.
\end{proposition}

\begin{proof}
    这里我们给出一个需要用到商环和分式环显式定义(而非只用泛性质)的证明.

    首先考虑典范同态$A\to A{\divslash}\ideal{a}\to \SAa$, 将$x\in A$映到$(x+\ideal{a}){\divslash}(1+\ideal{a})$, 这个映射将$s\in S$映到$(s+\ideal{a}){\divslash}(1+\ideal{a})$是单位, 由分式环的泛性质知有同态$S^{-1}A\to \SAa$, 将$x{\divslash}s$映到$(x+\ideal{a}){\divslash}(s+\ideal{a})$, 而这个映射又将$S^{-1}\ideal{a}$的元素映到0, 于是由商环的泛性质知有同态$\phi\colon\SASa\to\SAa$将$x{\divslash}s + S^{-1}\ideal{a}$映到$(x+\ideal{a}){\divslash}(s+\ideal{a})$.

    其次考虑典范同态$A\to S^{-1}A\to\SASa$, 将$x\in A$映到$x{\divslash}1+S^{-1}\ideal{a}$, 这个映射将$\ideal{a}$映到0, 由商环的泛性质知由有同态$A{\divslash}\ideal{a}\to\SASa$将$x+\ideal{a}$映到$x{\divslash}1+S^{-1}\ideal{a}$, 而这个映射又将$s\in\overline{S}^{-1}$映到$s{\divslash}1+S^{-1}\ideal{a}$是单位, 于是由分式环的泛性质知有同态$\psi\colon\SAa\to\SASa$将$(x+\ideal{a}){\divslash}(s+\ideal{a})$映到$x{\divslash}s + S^{-1}\ideal{a}$.

    由构造发现$\phi, \psi$互为逆, 并且与典范同态可交换.
\end{proof}

\begin{proposition}[{{\parencite[41, Proposition 3.11]{atiyah_introduction_1969}}}]\label{prop:fracideal}
    关于$S^{-1}A$的理想, 有如下命题成立.
    \begin{enumerate}
        \item\label{enum:prop-fracideal-1} $S^{-1}A$的每个理想都是扩张理想.
        \item\label{enum:prop-fracideal-2} $S^{-1}A$的素理想全体与$A$的与$S$不交的素理想全体有保序双射($\ideal{p}\leftrightarrow S^{-1}\ideal{p}$).
        \item\label{enum:prop-fracideal-3} $S^{-1}$运算与理想的和积交根均可交换(或分配). % TODO: 观察一下有没有必要补extension contraction性质的命题
    \end{enumerate}
\end{proposition}

\begin{proof}
    \ref{enum:prop-fracideal-1} 设$\ideal{b}$为$S^{-1}A$的理想, 设$x{\divslash}s\in \ideal{b}$, 则$x{\divslash}1\in\ideal{b}$, 故$x\in\ideal{b}^c$, 因此$x{\divslash}s\in\ideal{b}^{ce}$, 于是我们证明了$\ideal{b}\subseteq\ideal{b}^{ce}$, 又由\thref{prop:extencontrcorr}知一般情况下有$\ideal{b}\supseteq\ideal{b}^{ce}$, 于是$\ideal{b}=\ideal{b}^{ce}$, 即$S^{-1}A$的每个理想都是扩张理想.

    \ref{enum:prop-fracideal-2} 只需要证明对于素理想$\ideal{p}\cap S=\varnothing$有$\ideal{p}^e$是素理想并且$\ideal{p}^{ec}=\ideal{p}$, 以及对于素理想$\ideal{q}\subseteq S^{-1}A$有$\ideal{q}^c$是与$S$不交的素理想并且$\ideal{q}^{ce}=\ideal{q}$. 我们已经知道对于素理想$\ideal{q}\subseteq B$有$\ideal{q}^c$为素理想, 并且由于其为扩张理想, 有$\ideal{q}=\ideal{q}^{ce}$成立.

    先考察$A$中的收缩理想, 有$x\in\ideal{a}^{ec}$等价于存在$y\in\ideal{a}$与$s\in S$使得$x{\divslash}1=a{\divslash}s$, 故等价于存在$s\in S$使得$x{\divslash}s\in\ideal{a}$. 故$\ideal{a}$是收缩理想等价于$\ideal{a}\supseteq\ideal{a}^{ec}$, 也等价于如果存在$s\in S$使得$x{\divslash}s\in\ideal{a}$那么$x\in\ideal{a}$, 等价于$\pi(S)$中的元素都不是$A{\divslash}\ideal{a}$的零因子. 因此素理想$\ideal{p}\subseteq A$是收缩理想当且仅当$\ideal{p}\cap S=\varnothing$, 于是$\ideal{q}\subseteq S^{-1}A$满足$\ideal{q}^c\cap S=\varnothing$.

    再证明$A$的素理想$\ideal{p}$的扩张$\ideal{p}^e$是素理想当且仅当$\ideal{p}\cap S=\varnothing$. 对于素理想$\ideal{p}\subseteq A$, 因为有同构$\overline{S}^{-1}(A{\divslash}\ideal{p})\cong S^{-1}A{\divslash}S^{-1}\ideal{p}$, 而$\overline{S}^{-1}(A{\divslash}\ideal{p})$为整环$A{\divslash}\ideal{p}$的分式域的子环, 故为整环或零环, 因此$S^{-1}\ideal{p}$为素理想或$(1)$, 而由分式环中扩张理想的显式表示知$S^{-1}\ideal{p}=(1)$当且仅当$\ideal{p}\cap S\neq\varnothing$, 即当$\ideal{p}\cap S=\varnothing$时有$\ideal{p}^e$为素理想.

    \ref{enum:prop-fracideal-3}由\thref{prop:extencontrop}知$S^{-1}$与理想的和与积可交换, 再验证$S^{-1}(\ideal{a}\cap\ideal{b})=S^{-1}\ideal{a}\cap S^{-1}\ideal{a}\cap\ideal{b}$, 以及$S^{-1}\sqrt{\ideal{a}}=\sqrt{S^{-1}\ideal{a}}$即可.
\end{proof}

\begin{example}\leavevmode\vspace{-\baselineskip}% TODO: Separate style and content TODO: reference
    \begin{enumerate}
        \item 设$A$为整环, $S=A-\{0\}$, 则$S^{-1}A$为域, 称为$A$的\emph{分式域}, 有时记为$K(A)$.
        \item 设$\ideal{p}$为环$A$的素理想, 则$\ideal{p}$的余集$A-\ideal{p}$是乘法闭集, 称分式环$(A-\ideal{p})^{-1}A$为$A$在$\ideal{p}$的\emph{局部化}, 记作$A_{\ideal{p}}$. 根据\thref{prop:fracideal}, $A_{\ideal{p}}$的素理想与$A$的包含于$\ideal{p}$的素理想有保序双射, 则由于极大理想存在并且为素理想, 有$\ideal{p}^e$为$A_{\ideal{p}}$的唯一极大理想, 即$A_{\ideal{p}}$为局部环.
        \item 设$f\in A$为环$A$的非零元, 则集合$\{f^n\vert n\in \NN\}$是乘法闭集, 记$A$关于该集合的分式环为$A_f$. 有时这也被称为$A$的\emph{局部化}.
    \end{enumerate}
\end{example}

\subsection{Noether环与准素分解}\label{subsec:primdecom}

前文说过, 我们的主要研究对象是域上的多项式环及其商环, 这一节中我们将证明这些环都是Noether环, 即它们满足某种有限条件, 并证明重要的Hilbert零点定理. 准素分解是交换代数中一个重要的技术, 它推广了唯一分解整环中元素分解的概念, 可以将Noether环的理想在某种意义下唯一分解为若干个准素理想的交. 准素分解的几何含义我们将在()% TODO: reference
看到.

\begin{proposition}[{{\parencite[74, Proposition 6.1; 75, Proposition 6.2]{atiyah_introduction_1969}}}]\label{prop:noetherring}
    对于环$A$, 以下三个命题等价.
    \begin{enumerate}
        \item\label{enum:prop-nr-chain} 环$A$中的每个理想升链$\ideal{a}_1\subseteq\ideal{a}_2\subseteq\dotsb$一定稳定, 即存在$n$使得$\ideal{a}_n=\ideal{a}_{n+1}=\dotsb$.
        \item\label{enum:prop-nr-max} 环$A$中的任何一族理想$\{\ideal{a}_\lambda\}$都有极大元, 即存在$\lambda_0$使得对于任意的$\lambda$有$\ideal{a}_\lambda\subseteq\ideal{a}_{\lambda_0}$成立.
        \item\label{enum:prop-nr-fnt} 环$A$中的每个理想都是有限生成的.
    \end{enumerate}
\end{proposition}

\begin{proof}
    $\ref{enum:prop-nr-chain}\Rightarrow\ref{enum:prop-nr-max}$ 假设\ref{enum:prop-nr-chain}成立, 对有偏序结构的理想族$\{\ideal{a}_\lambda\}$运用Zorn引理(\thref{thm:maxideal})即可.

    $\ref{enum:prop-nr-max}\Rightarrow\ref{enum:prop-nr-fnt}$ 假设\ref{enum:prop-nr-fnt}不成立, 选择公理\footnotemark 保证了序列$\{x_n\}_{n\in\ZZ_+}\subseteq A$的存在, 其满足对于任意的$n\in\ZZ_+$都有$x_{n+1}\notin (x_1, \dotsc, x_n)$. 于是我们有理想族$\ideal{a}_n=(x_1, \dotsc, x_n)$, 满足$\ideal{a}_1\subsetneqq\ideal{a}_2\subsetneqq\dotsb$, 无极大元, 故\ref{enum:prop-nr-max}不成立.
    \footnotetext{{这里只需要用到选择公理(\axiom{AC})的一个弱化版本--相关选择公理(\axiom{DC}, Axiom of Dependent Choice).}}

    $\ref{enum:prop-nr-fnt}\Rightarrow\ref{enum:prop-nr-chain}$ 假设\ref{enum:prop-nr-fnt}成立, 则对于任意的理想升链$\ideal{a}_1\subseteq\ideal{a}_2\subseteq\dotsb$, 都有它的上确界$\ideal{a}\coloneq \bigcup_{j}\ideal{a}_{j}$是有限生成理想, 设其可由$x_1, \dotsc, x_n$生成. 设$c_1, \dotsc, c_n\in \ZZ^+$满足$x_j\in\ideal{a}_{c_j}$, 则对于$N=\max_{j=1}^nc_j$有$x_1, \dotsc, x_n\subseteq\ideal{a}_N$, 故$\ideal{a}_N=\ideal{a}_{N+1}=\dotsb$, 即该理想升链稳定.
\end{proof}

定义满足\thref{prop:noetherring}中条件的环为\emph{Noether环}, 其中条件\ref{enum:prop-nr-chain}称为\emph{升链条件}(a.c.c.), 条件\ref{enum:prop-nr-max}称为\emph{极大条件}, 这两个条件只与环$A$理想全体的偏序结构有关, 它们的等价在一般的偏序集中也成立.

\begin{proposition}[{{\parencite[76, Proposition 6.6; 80, Proposition 7.3]{atiyah_introduction_1969}}}]\label{prop:noetherring2}
    设$A$为Noether环, 则
    \begin{enumerate}
        \item\label{enum:prop-nr2-quot} 如果$\ideal{a}$为理想, 那么商环$A{\divslash}\ideal{a}$为Noether环;
        \item\label{enum:prop-nr2-frac} 如果$S$为乘法闭集, 那么分式环$S^{-1}A$为Noether环.
    \end{enumerate}
\end{proposition}

\begin{proof}
    \ref{enum:prop-nr2-quot} 由\thref{prop:quotidealcorr}知$A{\divslash}\ideal{a}$的理想全体与$A$的包含$\ideal{a}$的理想全体有保序双射, 故满足升链条件.

    \ref{enum:prop-nr2-frac} 由\thref{prop:extencontrcorr}\ref{enum:prop-ec-corr}和\thref{prop:fracideal}\ref{enum:prop-fracideal-3}知$S^{-1}A$的理想全体与$A$的收缩理想全体有保序双射, 故满足升链条件.
\end{proof}

\begin{theorem}[Hilbert基定理{{\parencites[81, Theorem 7.5]{atiyah_introduction_1969}[201, Theorem 1]{zariski_commutative_1958}{noauthor_hilberts_2020}}}]\label{thm:hilbertbasis}
    若$A$为Noether环, 则有限生成$A$-代数为Noether环.
\end{theorem}

\begin{proof}
    由\thref{prop:fgalgebra}和\thref{prop:noetherring2}\ref{enum:prop-nr2-quot}, 只需证多元多项式环$A[X_1, \dotsc, X_n]$为Noether环. 又由数学归纳法, 只需证$n=1$的情况. 反证, 设理想$\ideal{a}\subseteq A[X]$不是有限生成理想, 则由非独立选择公理(\axiom{DC})知, 存在$A[X]$中的序列$\{f_n\}_{n\in\ZZ_+}$, 使得$f_{n+1}$为满足$f_{n+1}\notin \ideal{b}_n\coloneq (f_1, \dotsc, f_{n})$的某个次数最低的多项式, 则次数序列$\{\deg(f_n)\}_{n\in\ZZ_+}$单调不减. 设$f_n$的首项系数为$a_n$, 则$\ideal{b}\coloneq (a_1, a_2, \dotsc)$为$A$的理想, 故由升链条件知存在正整数$N>1$使得$\ideal{b}=(a_1, \dotsc, a_{N-1})$, 特别地, $a_N=\sum_{0<j<N}b_ja_j$, 其中$b_j\in A$. 构造多项式$f=\sum_{0<j<N}b_jX^{\deg(f_N)-\deg(f_j)}f_j$, 有$f$与$f_N$次数相同且首项系数相同, 并且有$f\in\ideal{b}_{N-1}$, 故$f-f_N\in\ideal{b}_{N-1}$次数比$f_N$低, 与假设矛盾. 得证.
\end{proof}

这一节的最后我们来建立Noether环上的准素分解理论, 我们将先通过构造证明准素分解的存在性, 再证明从属素理想, 孤立从属素理想及其对应的孤立准素理想的唯一性.

准素分解是对环的理想的分解, 由唯一分解整环中元素的分解推广而来, 素元推广到素理想, 而素元的幂次推广到我们即将介绍的准素理想. 设$A$为环, 若$A$的真理想$\ideal{q}$满足如果$xy\in \ideal{q}$那么$x\in\ideal{q}$或者$y\in\sqrt{\ideal{q}}$, 则称$\ideal{q}$为\emph{准素理想}, 有等价条件为$A{\divslash}\ideal{q}\neq 0$并且$A{\divslash}\ideal{q}$的每个零因子都是幂零元. 显然素理想是准素理想, 准素理想的拉回是准素理想.

\begin{proposition}[{{\parencite[50, Proposition 4.1; 51, Lemma 4.3]{atiyah_introduction_1969}}}]\label{prop:primary}\leavevmode
    \begin{enumerate}
        \item 设$\ideal{q}$为环$A$的准素理想, 则$\ideal{p}\coloneq \sqrt{\ideal{q}}$为包含$\ideal{q}$的极小素理想, 称$\ideal{q}$为$\ideal{p}$-\emph{准素理想}.
        \item\label{enum:prim-inte} 设$\ideal{q}_1, \dotsc, \ideal{q}_n$为环$A$的$\ideal{p}$-准素理想, 则$\bigcap_{j=1}^n\ideal{q}_j$为$\ideal{p}$-准素理想.
    \end{enumerate}
\end{proposition}

\begin{proof}
%TODO: Need a proof here
\end{proof}

环$A$中理想$\ideal{a}$的准素分解为将$\ideal{a}$写为有限个准素理想的交, 即$\ideal{a}=\bigcap_{j=1}^n\ideal{q}_j$. 进一步地, 如果有$\sqrt{\ideal{q}_j}$两两不同, 并且对于每个$j$都有$\ideal{q}_j\nsupseteq\bigcap_{k\neq j}\ideal{q}_k$, 则称这个准素分解为\emph{既约的}. 利用\thref{prop:primary}\ref{enum:prim-inte}, 再去除多余的项, 我们总可以将准素分解化为既约的. 一般来说准素分解不一定存在, 不过我们即将证明在Noether环上准素分解总是存在的.

\begin{theorem}[Lasker–Noether定理{{\parencites[83, Theorem 7.13]{atiyah_introduction_1969}[209, Theorem 4]{zariski_commutative_1958}}}]\label{thm:laskernoether}
    Noether环$A$的每个理想都有既约准素分解.
\end{theorem}

\begin{proof}
    先给一个定义, 如果环$A$的一个理想$\ideal{a}$满足如果$\ideal{a}=\ideal{b}\cap\ideal{c}$则$\ideal{a}=\ideal{b}$或$\ideal{a}=\ideal{c}$, 则称$\ideal{a}$为\emph{不可约理想}, 一个理想若不是不可约的, 则称其为\emph{可约理想}. 这个证明将分为两步, 首先证明Noether环的每个理想都能分解成有限个不可约理想的交, 再证明Noether环的不可约理想总是准素理想.

    考虑Noether环$A$中不能分解成有限个不可约理想的交的理想全体, 假设其非空, 因为满足极大条件, 所以存在极大元$\ideal{a}$, 显然$\ideal{a}$是可约的, 所以存在$\ideal{b}\cap\ideal{c}=\ideal{a}$, 满足$\ideal{b}, \ideal{c}\supsetneqq\ideal{a}$. 由$\ideal{a}$的极大性知$\ideal{b}, \ideal{c}$可以写成有限个不可约理想的交, 于是$\ideal{a}$也可以写成有限个不可约理想的交, 与定义矛盾. 于是得证第一步, Noether环的每个理想都能分解成有限个不可约理想的交.

    设$\ideal{a}$为Noether环$A$的不可约理想, 那么零理想$(0)$是商环$A{\divslash}\ideal{a}$的不可约理想, 并且由于准素理想的拉回是准素理想, 所以我们只需要证明$(0)$是$A{\divslash}\ideal{a}$的准素理想. 调整记号, 我们只需要证明如果Noether环$A$的零理想$(0)$是不可约理想, 则它一定是准素理想. 考虑$xy=0$但$y\neq 0$, 有理想升链$\Ann((x))\subseteq\Ann((x^2))\subseteq\dotsb$, 由升链条件知该升链稳定, 即存在$n$使得$\Ann((x^n))=\Ann((x^{n+1}))=\dotsb$. 我们声称$(x^n)\cap (y)=(0)$, 如果$a\in (y)$, 则$ax=0$, 如果进一步地有$a\in (x^n)$, 设$a=bx^n$, 则$bx^{n+1}=ax=0$, 因此$b\in\Ann((x^{n+1}))=\Ann((x^n))$, 故$a=bx^n=0$. 因为$(0)$为不可约理想且$(y)\neq 0$, 所以$(x^n)=(0)$, 即$x^n=0$, 得证第二步, Noether环的不可约理想总是准素理想.

    又由于每个准素分解都可以化为既约准素分解, 我们证明了Noether环$A$的每个理想都有既约准素分解.
\end{proof}

现在来考察准素分解的唯一性, 首先我们利用理想商这一工具来证明准素分解中从属素理想的唯一性.

\begin{proposition}[{{\parencite[51, Lemma 4.4]{atiyah_introduction_1969}}}]\label{prop:idealquotprimary}
    设$\ideal{q}$为环$A$的$\ideal{p}$-准素理想, $x\in A$, 则
    \begin{enumerate}
        \item 如果$x\in \ideal{q}$, 则$(\ideal{q}{:}(x))=(1)$;
        \item 如果$x\notin\ideal{q}$, 则$(\ideal{q}{:}(x))$为$\ideal{p}$-准素理想, 故$\sqrt{(\ideal{q}{:}(x))}=\ideal{p}$;
        \item 如果$x\notin\ideal{p}$, 则$(\ideal{q}{:}(x))=\ideal{q}$.
    \end{enumerate}
\end{proposition}

\begin{proof}
    %TODO: PROOF!
\end{proof}

\begin{theorem}[{{\parencite[52, Theorem 4.5]{atiyah_introduction_1969}}}]\label{prop:primuniq1}
    设$\ideal{a}$为环$A$的一个可准素分解的理想, 令$\ideal{a}=\bigcap_{j=1}^n \ideal{q}_j$为既约准素分解, 对于$j=1, \dotsc, n$记$\ideal{p}_j\coloneq \sqrt{\ideal{q}_j}$, 则集合$\{\ideal{p}_1, \dotsc, \ideal{p}_n\}$恰为$\{\sqrt{(\ideal{a}{:}(x))}\vert x\in A\}$的素理想全体, 于是$\{\ideal{p}_1, \dotsc, \ideal{p}_n\}$与既约准素分解的选取无关, 称为$\ideal{a}$的\emph{从属素理想}.
\end{theorem}

\begin{proof}
    首先证明能写成$\sqrt{(\ideal{a}{:}(x))}$形式的素理想一定是某一个$\ideal{p}_j$. 由\thref{prop:idealop}\ref{enum:prop-idealop-quot-firstcap}和\thref{prop:idealquotprimary}, 有$\sqrt{(\ideal{a}{:}(x))}=\sqrt{\bigcap_{k=1}^n(\ideal{q}_k{:}(x))}=\bigcap_{x\notin\ideal{q}_k}\ideal{p}_k$. 如果$\sqrt{(\ideal{a}{:}(x))}$是素理想, 那么由\thref{prop:prime}\ref{enum:prop-prime-absorb}知存在$j$使得$\sqrt{(\ideal{a}{:}(x))}=\ideal{p}_j$.

    再证明每个$\ideal{p}_j$都能写成$\sqrt{(\ideal{a}{:}(x))}$的形式. 由于准素分解的既约性, 所以对于每个$j$存在$x_j\notin\ideal{q}_j$, $x_j\in\bigcap_{k\neq j}\ideal{q}_k$, 而由上一步知$\sqrt{(\ideal{a}{:}(x_j))}=\bigcap_{x\notin\ideal{q}_k}\ideal{p}_k=\ideal{p}_j$. 遂得证.
\end{proof}

接着我们证明孤立从属素理想的唯一性, 并利用局部化这一工具证明其对应的孤立准素理想的唯一性. 环$A$的可准素分解理想$\ideal{a}$的从属素理想全体中的极小元被称为\emph{孤立从属素理想}, 其余的从属素理想被称为\emph{嵌入从属素理想}. ``孤立"与``嵌入"的说法来源于代数几何, 我们将在(%TODO: isolated embedded
)看到其几何意义, 下一个命题刻画了几何意义对应的代数意义.

\begin{proposition}[{{\parencite[52, Proposition 4.6]{atiyah_introduction_1969}}}]
    设$\ideal{a}$为环$A$的可准素分解理想. 则每个包含$\ideal{a}$的素理想$\ideal{p}$都包含一个$\ideal{a}$的孤立从属素理想. 因此$\ideal{a}$的孤立从属素理想恰为包含$\ideal{a}$的素理想全体中的极小元.
\end{proposition}

\begin{proof}
    如果$\ideal{p}\supseteq\ideal{a}=\bigcap_{j=1}^n\ideal{q}_j$, 那么由\thref{prop:idealop}\ref{enum:prop-idealop-rad-inters}知$\ideal{p}=\sqrt{\ideal{p}}\supseteq\sqrt{\bigcap_{j=1}^n\ideal{q}_j}=\bigcap_{j=1}^n\sqrt{\ideal{q}_j}=\bigcap_{j=1}^n\ideal{p}_j$, 所以存在$j$使得$\ideal{p}\supseteq\ideal{p}_j$, 于是$\ideal{p}$包含一个$\ideal{a}$的从属素理想.
\end{proof}

现在来考察准素理想在局部化下的扩张与收缩.

\begin{proposition}[{{\parencite[53, Proposition 4.8; 54, Proposition 4.9]{atiyah_introduction_1969}}}]\label{prop:primlocal}设$S$为环$A$的乘法闭集, 考虑典范同态$A\to S^{-1}A$.
    \begin{enumerate}
        \item\label{enum:prop-primlocal-exten} 设$\ideal{q}$为$\ideal{p}$-准素理想, 如果$S\cap\ideal{p}\neq\varnothing$, 则$\ideal{q}^e=(1)$. 如果$S\cap\ideal{p}=\varnothing$, 则$\ideal{q}^e$为$\ideal{p}^e$-准素理想, 并且$\ideal{q}^{ec}=\ideal{q}$;
        \item\label{enum:prop-primlocal-decom} 设$\ideal{a}$为可准素分解的理想, 并且有既约准素分解$\ideal{a}=\bigcap_{j=1}^n\ideal{q}_j$, 设$\ideal{p}_j=\sqrt{\ideal{q}_j}$, 则有
        \begin{equation*}
            \ideal{a}^{e}=\bigcap_{\ideal{p}_j\cap S=\varnothing}\ideal{q}_j^e,
            \qquad \ideal{a}^{ec}=\bigcap_{\ideal{p}_j\cap S=\varnothing}\ideal{q}_j,
        \end{equation*}
        并且这两个都是既约准素分解.
    \end{enumerate}
\end{proposition}

\begin{proof}
    \ref{enum:prop-primlocal-exten}% TODO: PROOF

    \ref{enum:prop-primlocal-decom}因为$S$为乘法闭集, 所以$\ideal{p}_j\cap S\neq\varnothing$等价于$\ideal{q}_j\cap S\neq\varnothing$, 此时有$\ideal{q}_j^e=(1)$. 再由\ref{enum:prop-primlocal-exten}与\thref{prop:fracideal}\ref{enum:prop-fracideal-3}知, $\ideal{a}^e=(\bigcap_{j=1}^n\ideal{q}_j)^e\bigcap_{j=1}^n\ideal{q}_j^e=\bigcap_{\ideal{p}_j\cap S=\varnothing}\ideal{q}_j^e$. 现在证明这个$\ideal{a}^e$的准素分解是既约的. 如果有$\ideal{q}_j^e\supseteq\bigcap_{k\neq j}\ideal{q}_k^e$, 由\thref{prop:extencontrop}有$\ideal{q}_j^e\supseteq(\bigcap_{k\neq j}\ideal{q}_k)^e$, 由\ref{enum:prop-primlocal-exten}两边取收缩即与$\ideal{a}$准素分解的既约性矛盾, 又当$\ideal{p}_j\cap S=\varnothing$时有$\sqrt{\ideal{q}_j}^e=\ideal{p}_j^e$两两不同, 故这个$\ideal{a}^e$的准素分解为既约的. 再两边取拉回, 类似地由\ref{enum:prop-primlocal-exten}, \thref{prop:fracideal}\ref{enum:prop-fracideal-3}和\thref{prop:extencontrop}可得证$\ideal{a}^{ec}=\bigcap_{\ideal{p}_j\cap S=\varnothing}\ideal{q}_j$为既约准素分解.
\end{proof}

\begin{theorem}[{{\parencite[54, Corollary 4.11]{atiyah_introduction_1969}}}]
    设$\ideal{a}$为环$A$的可准素分解理想, 则$\ideal{a}$的孤立从属素理想对应的准素理想由$\ideal{a}$唯一决定, 称为\emph{孤立准素理想}.
\end{theorem}

\begin{proof}
    设$\ideal{p}$为$\ideal{a}$的孤立从属素理想, 其对应的准素理想为$\ideal{q}$. 考察局部化$A_{\ideal{p}}$, 由$\ideal{p}$的极小性以及\thref{prop:primlocal}\ref{enum:prop-primlocal-decom}知$\ideal{a}^{ec}=\ideal{q}$, 又由\thref{prop:primuniq1}以及定义知$\ideal{a}$的孤立从属素理想由$\ideal{a}$唯一决定, 故孤立从属素理想对应的准素理想由$\ideal{a}$唯一决定.
\end{proof}

\subsection{维数理论}

维数理论也是交换代数的重要话题, Atiyah-MacDonald\parencite[116--126, Chapter 11]{atiyah_introduction_1969}一书中介绍了一般的Noether局部环的维数理论, 需要模论以及完备化等技术. 限于篇幅原因, 这一节我们仅介绍域的多项式函数整环的维数理论. 这一部分维数理论与域论关系密切, 因此我们将先介绍域论中的维数理论, 即超越基与超越次数;% TODO: 环中重要的是素理想 介绍素理想的高度与深度 介绍其与环维数的关系

% 域论的记号 代数相关代数无关 域扩张 F(S)

回顾线性空间的维数理论, 我们定义了线性空间中线性相关与线性无关的概念, 从而引出了Hamel基的概念, 并证明了\parencite[44--46, Section 2.1]{ciarlet_linear_2013}Hamel基的存在性\footnotemark 及其在基数意义下的唯一性. 我们将推广这个工作, 定义集合论意义下的相关关系, 并将其应用在域扩张中, 从而得到域扩张的超越基与超越次数.
\footnotetext{``任意非零线性空间都有Hamel基"这个命题在\axiom{ZF}公理系统下也可以推出选择公理\axiom{AC}\parencite{blass_existence_1984}, 从而与选择公理\axiom{AC}等价.}

设$X$为非空集合, 用$\powerset{X}$表示$X$的\emph{幂集}, 即$X$的子集全体构成的集合, 用大写字母表示$\powerset{X}$的元素, 用小写字母表示$X$的元素. 考虑子集$\Delta\subseteq X\times \powerset{X}$, 即$\Delta$为从$X$到$\powerset{X}$的一个\emph{对应}, 如果$(x, S)\in \Delta$则记$x\depend S$. 如果$\Delta$满足
\begin{enumerate}
    \item\label{enum:dependaxiom1} 如果$x\in S$, 则$x\depend S$;
    \item\label{enum:dependaxiom2} 若$x\depend S$, 则存在有限子集$F\subseteq S$使得$x\depend F$;
    \item\label{enum:dependaxiom3} 如果$x\depend S$并且对于每个$y\in S$都有$y\depend T$, 那么有$x\depend T$;
    \item\label{enum:dependaxiom4} (Steinitz对换公理) 如果$x\depend S$但是$x\ndepend S-\{y\}$, 则$y\depend (S-\{y\})\cup\{x\}$,
\end{enumerate}
则称$\Delta$为一个$X$上的\emph{相关关系}. 给定相关关系$\Delta$, 如果子集$S\subseteq X$满足不存在$x\in S$使得$x\depend S-\{x\}$, 则称$S$为\emph{无关集}, 否则称$S$为\emph{相关集}. 如果$X$的无关子集$B$满足每个$x\in X$都有$x\depend B$, 则称$B$为$X$的一个\emph{基}.

\begin{remark}
    上述定义中, $S$与$B$均可以为空集.
\end{remark}

\begin{example}
    设$X$为有限维线性空间, 定义从$X$到$\powerset{X}$的对应$\Delta$为$x\depend S$当且仅当$x$能被$S$的某个有限子集线性表示, 则$\Delta$为$X$上的一个相关关系, $\Delta$意义下的无关集恰为线性空间中的线性无关集, $\Delta$意义下的基恰为线性空间的基.
\end{example}

接下来我们将要证明基存在性以及基数意义下的唯一性, 思路与有限维线性空间的情况类似, 即研究极大无关集的性质. 首先我们需要一个引理保证无关集可以``扩张".

\begin{proposition}[{{\parencite[123, Lemma 1]{jacobson_basic_1989}}}]\label{prop:dependlemma}
    设$\Delta$为$X$上的相关关系, 如果$S\subseteq X$为无关集且$x\ndepend S$, 则$S\cup\{x\}$也为无关集.
\end{proposition}

\begin{proof}
    若假设$S\cup\{x\}$为无关集, 注意到有$x\ndepend S$, 故存在$y\in S$使得$y\depend (S-\{y\})\cup \{x\}$. 因为$S$无关, 故$y\ndepend S-\{y\}$, 故由Steinitz对换公理知$x\depend S$, 矛盾. 遂得证.
\end{proof}

\begin{theorem}[{{\parencite[123, Theorem 3.12]{jacobson_basic_1989}}}]\label{thm:dependbase}
    设$\Delta$为$X$上的相关关系, 则存在$X$的一个基, 并且$X$的任意两个基具有相同的基数.
\end{theorem}
%\footnotetext{如果一个集合$X$为空集, 则定义$X$的\emph{基数}为0; 如果存在$X$到$\{1, 2, \dotsc, n\}$的双射, 则定义$X$的\emph{基数}为$n$; 其余情况定义$X$的\emph{基数}为$\infty$. 其实把基数换成基数也成立, 证明只需要一点关于基数运算的性质, 不过没必要% 这里我们不给出基数的正式定义, 只定义两个非空集合\emph{具有相同的基数}当且仅当存在两个集合之间的双射, 并定义空集与且仅与空集\emph{具有相同的基数}.
%}

\begin{proof}
    首先利用Zorn引理构造极大无关集, 并证明每个极大无关集都是一个基. 无关集全体作为$\powerset{X}$的子集, 有由集合包含关系定义的偏序关系. 考虑任一全序子链$\{S_\lambda\}$, 只需证明其并集$\tilde{S}\coloneq \bigcup_\lambda S_\lambda$也是无关集. 先考虑$\tilde{S}$有限的情况, 那么一定等于某个$S_\lambda$, 故为无关集. 再考虑$\tilde{S}$无限的情况, 反证存在$x\in \tilde{S}$使得$x\depend \tilde{S}-\{x\}$, 则由定义知存在有限子集$T\subseteq\tilde{S}$满足$x\in T$并且$x\depend T-\{x\}$. 由于全序子链$\{S_\lambda\}$的并$\tilde{S}$为无限集, 且$x\in \tilde{S}$, 故一定存在$S_\lambda$使得$x\in S_\lambda$并且$T\subseteq S_\lambda$, 故根据定义知$x\depend S_\lambda-\{x\}$, 与$S_\lambda$无关矛盾. 故得证无关集的全序子链的并为其上界, 根据Zorn引理知存在极大无关集, 由极大性及基的定义即可得到极大无关集总是基.

    现在考虑两个基$B$和$C$, 需要证明它们有相同的基数. 若$B$为空集, 则由基的定义知$C$也为空集, 故基数相同. 于是只需要考虑$B$和$C$均非空的情况.

    先考虑有限的情况, 我们将证明如果$B$有限, 则$C$有限, 并且$B$与$C$具有相同的基数. 设$B$有限, 即$B=\{x_1, x_2, \dotsc, x_n\}$为$n$元集合. 利用归纳法证明对于每个$0\leq k\leq n$都存在$y_i\in C$使得$\{y_1, \dotsc, y_k, x_{k+1}, \dotsc, x_n\}$为$n$元集合并且为$X$的基. 当$k=0$时因为$B$是基故命题成立, 假设命题对于$k-1$成立, 记$D_{k-1}\coloneq \{y_1, \dotsc, y_{k-1}, x_k, x_{k+1}, \dotsc, x_n\}$. 由基的定义以及归纳假设知, 一定存在$y\in C$使得$y\ndepend D_{k-1}-\{x_k\}$成立, 取一个这样的$y$为$y_k$从而得到$D_k\coloneq \{y_1, \dotsc, y_k, x_{k+1}, \dotsc, x_n\}$, 由\thref{prop:dependlemma}知$D_k$为无关集. 又由Steinitz对换公理知$x_k\depend D_k$, 故每个$D_{k-1}$的元素$x$都有$x\depend D_k$, 由于$D_{k-1}$是基, 所以每个$X$的元素$x$都有$x\depend D_{k}$, 遂得证$D_k$为$n$元集合且为$X$的基, 故由归纳法结论得证.

    无限的情况比有限的要简单不少, 当$B$无限时, 由有限情况的结论知$C$一定无限, 还需要证明$B$与$C$具有相同的基数. 只需证明$\vert B\vert\leq \vert C\vert$. 对于每个$C$的元素$y$, 存在$B$的有限子集$B_y$使得$y\depend B_y$, 我们有$\vert \{B_y\}\vert\leq \vert C\vert$. 因为每个$B_y$都是有限的, 所以有$\vert\bigcup B_y\vert\leq \vert\ZZ\times C\vert$. 由于$C$是无限集, 由\thref{prop:cardcartcor}知$\vert\ZZ\times C\vert=\vert C\vert$, 又根据基的定义, 一定有$\bigcup B_y=B$, 于是有$\vert B\vert\leq\vert C\vert$, 得证.
\end{proof}

现在我们可以来介绍域的超越基和超越指数了, 我们需要在域扩张的语境中定义一个相关关系, 从而应用之前介绍的相关关系的一般理论. 考虑域扩张$F\subseteq E$, 如果$n$元子集$\{x_1, \dotsc, x_n\}\subseteq E$满足将$f$映到$f(x_1, \dotsc, x_n)$的同态$F[X_1, \dotsc, X_n]\to E$有非零核, 则称该$n$元子集在$F$上\emph{代数相关}. 对于$E$的任意非空子集, 如果存在有限子集在$F$上代数相关, 则称其在$F$上\emph{代数相关}. 我们有如下的判别准则.

\begin{proposition}[{{\parencite[515, Theorem 8.33]{jacobson_basic_1989}}}]\label{prop:algbdependcrit}
    给定域扩张$F\subseteq E$, 非空子集$S\subseteq E$在$F$上代数相关当且仅当存在$a\in S$是域$F(S-\{a\})$的代数元.
\end{proposition}

\begin{proof}
    对于任意子集$T\subseteq E$, 如果$a$是$F(T)$的代数元, 则存在$T$的有限子集$U$使得$a$是$F(U)$的代数元, 因此可以只考虑$S$是有限的情况, 记$S=\{x_1, \dotsc, x_n\}$, 其中$x_j$两两不同, 记$S_j\coloneq S-\{x_j\}$.

    如果$S$在$F$上代数相关, 那么存在非零多项式$f\in F[X_1, \dotsc, X_n]$使得$f(x_1, \dotsc, x_n)=0$. 还需要证明存在$i$使得$x_i$为$F(S_i)$的代数元. 利用归纳法, 当$n=1$时由定义即得, 假设$n-1$时成立. 如果$\{x_1, \dotsc, x_{n-1}\}$代数无关, 因为$f$可以通过合并系数以及代入诱导出多项式$\tilde{f}\in F(x_1, \dotsc, x_{n-1})[X]$使得$\tilde{f}(x_n)=0$, 且归纳假设保证了$\tilde{f}$非零, 于是$x_n$为$F(S_n)$的代数元.

    反之, 假设存在$j$使得$x_j$为$S_j$的代数元. 为了记号上的方便, 不妨重新编号, 使得$j=n$. 根据定义, 存在$g_1, \dotsc, g_m\in F(x_1, \dotsc, x_{n-1})$使得$g=X^m+g_1X^{m-1}+\dotsb+g_m\in F(x_1, \dotsc, x_{n-1})[X]$满足$g(x_n)=0$. 去分母, 存在$f_0, \dotsc, f_m\in F[X_1, \dotsc, X_{n-1}]$满足对每个$1\leq j<\leq n$, 有$g_jf_0(x_1, \dotsc, x_{n-1})=f_j(x_1, \dotsc, x_{n-1})$, 故$f\coloneq f_0(X_1, \dotsc, X_{n-1})X_n^m+f_1(X_1, \dotsc, X_{n-1})X_n^{m-1}+\dotsb+f_m(X_1, \dotsc, X_{n-1})$属于$F[X_1, \dotsc, X_n]$为非零多项式, 并且将$x_1, \dotsc, x_n$映到0, 故$S$在$F$上代数相关.
\end{proof}

给定域扩张$F\subseteq E$, 定义一个$E$到$\powerset{E}$的\emph{对应}$\Delta$为$x\depend S$当且仅当$x$为$F(S)$的代数元.
\begin{proposition}[{{\parencite[516, Theorem 8.34]{jacobson_basic_1989}}}]\label{prop:algbdependcorr}
    对于给定域扩张$F\subseteq E$, $\Delta$定义了一个相关关系.
\end{proposition}

\begin{proof}
    我们只证明满足公理\ref{enum:dependaxiom3}和\ref{enum:dependaxiom4}, 另外两个是显然的.

    \ref{enum:dependaxiom3} ``如果$x\depend S$并且对于每个$y\in S$都有$y\depend T$, 那么有$x\depend T$". 我们需要一点关于域扩张次数的知识. 设非零多项式$f=y_0X^m+ y_1X^{m-1}+ \dotsb + y_m\in S[X]$使得$f(x)=0$, 记$K\coloneq F(T)$, 记$S_0\coloneq \{y_0, \dotsc, y_m\}$. 利用\thref{thm:fieldextdegreemulti}, 有$[K(S_0\cup\{x\}):K]=[K(S_0\cup\{x\}):K(S_0)][K(S_0):K]$, 又根据\thref{thm:fntfieldextdegree}有$[K(S_0\cup\{x\}):K(S_0)]$和$[K(S_0):K]\leq\prod [K(y_j):K]$均有限, 故$x$是$K=F(T)$的代数元.

    \ref{enum:dependaxiom4} ``如果$x\depend S$但是$x\ndepend S-\{y\}$, 则$y\depend (S-\{y\})\cup\{x\}$". 设$T\coloneq S-\{y\}$, $K\coloneq F(T)$, 则$x$为$K$的超越元同时也为$K(y)$的代数元, 由\thref{prop:algbdependcrit}知$\{x, y\}$在$K$上代数相关, 因此存在非零多项式$f\in K[X, Y]$使得$f(x, y)=0$, 因为$x$为$K$的超越元, 所以$f$可以通过合并系数以及代入诱导出多项式$\tilde{f}\in K[x](Y)$使得$\tilde{f}(y)=0$, 从而得证$y$是$K(x)=F(T\cup\{x\})$上的代数元, 即$y\depend T\cup \{x\}$.
\end{proof}

对于域扩张$F\subseteq E$, $E$的相关关系$\Delta$意义下的基称为域扩张$F\subseteq E$的\emph{超越基}, 即$B$是超越基当且仅当$B$代数无关并且每个$x\in E$都为$F(B)$的代数元.

\begin{theorem}[{{\parencite[516, Theorem 8.35]{jacobson_basic_1989}}}]\label{thm:tranbasis}
    域扩张$F\subseteq E$有超越基, 并且任意两个超越基有相同的基数.
\end{theorem}

\begin{proof}
    \thref{thm:dependbase}和\thref{prop:algbdependcorr}.
\end{proof}

利用\thref{thm:tranbasis}我们可以定义域扩张$F\subseteq E$的\emph{超越次数}为超越基的基数. 现在我们已经可以定义主要研究对象的维数了. 给定域$k$, 如果环$A$既是$k$的有限生成代数又是整环, 则称$A$为$k$的\emph{多项式函数整环}. 记$K$为$A$的分式域, 域$k$的多项式函数整环$A$的\emph{维数}$\dim (A)$被定义为域扩张$k\subseteq K$的超越次数, 是有限数. 在剩下的部分中, 我们想要利用环论来刻画维数, 发现素理想在其中有类似于线性子空间的地位, 是构成维数的基本组成部分.

如果$A$为多项式函数整环, 我们还可以定义素理想$\ideal{p}$的\emph{余维数}$\codim (\ideal{p})$为域扩张$k\subseteq A{\divslash}\ideal{p}$的超越次数.

\begin{proposition}\label{prop:primeidealdim}
    设$A$为多项式函数整环, $\ideal{p}$为$A$的素理想, 那么$\codim (\ideal{p})\leq\dim (A)$. 如果还有素理想$\ideal{q}$使得$\ideal{p}\subsetneqq\ideal{q}$, 那么$\codim (\ideal{p})>\codim (\ideal{q})$.
\end{proposition}

\begin{proof}
    % TODO: proof
\end{proof}

设$\ideal{p}$为环$A$的素理想,  定义$\ideal{p}$的\emph{高度}$h(\ideal{p})$为满足存在素理想升链$\ideal{p}_0\subsetneqq\ideal{p}_1\subsetneqq\dotsb\subsetneqq \ideal{p}_h=\ideal{p}$的$n$的上确界; 定义$\ideal{p}$的\emph{深度}$d(\ideal{p})$为满足存在素理想降链$\ideal{p}=\ideal{p}_d\subseteqq\ideal{p}_{d-1}\subsetneqq\dotsb\subsetneqq\ideal{p}_0\subsetneqq A$的$d$的下确界. 根据定义, 考虑素理想$\ideal{p}\subsetneqq\ideal{q}$, 只要$h(\ideal{p})$与$h(\ideal{q})$中有一个有限, 那么有$h(\ideal{p})<h(\ideal{q})$, 只要$d(\ideal{p})$与$d(\ideal{q})$中有一个有限, 那么有$d(\ideal{p})>d(\ideal{q})$.

\begin{proposition}[Noether正规化引理{{\parencite[69, Exercise 16]{atiyah_introduction_1969}}}]\label{prop:noethernormalization}
    设非零环$A$为域$k$上的有限生成$k$-代数, 则存在$r$元子集$\{y_1, \dotsc, y_r\}\subseteq A$在$k$上代数无关, 并且$A$的每个元素都可以由$k[y_1, \dotsc, y_r]$整表示.% TODO: integral dependence
\end{proposition}

\begin{proof}
    $k$无限的情况可以参考AM一书, 一般的情况可以看一下Wikipedia.
    % https://en.wikipedia.org/wiki/Noether_normalization_lemma
    % https://mathoverflow.net/questions/42275/choosing-the-algebraic-independent-elements-in-noethers-normalization-lemma/42363#42363
\end{proof}

\begin{proposition}[{{\parencite[91, Lemma]{zariski_commutative_1960}}}]\label{prop:heightoneideallemma}
    设$A$为$k$的多项式函数整环, $\ideal{p}$为高度为一的素理想, 则$\codim (\ideal{p}) = \dim (A)-1$.
\end{proposition}

\begin{proof}
    分类讨论, 如果是多项式环的话就是唯一分解整环, 非常简单; 否则的话利用\thref{prop:noethernormalization}来处理.
\end{proof}

\begin{theorem}[{{\parencite[193, Theorem 20]{zariski_commutative_1960}}}]\label{thm:ringdim}
    设$A=k[x_1, \dotsc, x_n]$为$k$的多项式函数整环, $\ideal{p}$为$A$的素理想, 则有
    \begin{enumerate}
        \item\label{enum:thm-ringdim-height} $\codim(\ideal{p})+h(\ideal{p})=\dim (A)$,
        \item\label{enum:thm-ringdim-depth} $\codim(\ideal{p})=d(\ideal{p})$.
    \end{enumerate}
    特别地, 有$\dim (A) = d((0))$.
\end{theorem}

\begin{proof}
    我们用归纳法证明这两个命题. 由于需要利用商环来简化问题, 所以归纳有一点非同寻常, 需要写得仔细一点.

    \ref{enum:thm-ringdim-height} 对$\dim (A)-\codim (\ideal{p})$进行归纳. 利用\thref{prop:primeidealdim}知$\codim (\ideal{p})\leq \dim (A)$, 而当$\codim (\ideal{p})=\dim (A)$时, 有$\ideal{p}=(0)$, 故$h(\ideal{p})=0$, 结论成立. 假设对于任意的满足条件的$A$和$\ideal{p}$以及$k\in\ZZ_+$, 当$\dim (A)-\codim (\ideal{p})< k$时结论成立, 那么对于给定的$A$和$\ideal{p}$, 考虑$\dim (A)-\codim (\ideal{p})=k$的情况, 不妨令$k\leq \dim (A)$. 首先由\thref{prop:primeidealdim}得$\dim (A)\geq\codim (\ideal{p}_0)>\codim (\ideal{p}_1)>\dotsb >\codim (\ideal{p}_{h-1})>\codim (\ideal{p})$, 因此$h(\ideal{p})\leq \dim (A)-\codim (\ideal{p})$. 另一方面, 因为$\ideal{p}\supseteqq (0)$, 所以存在素理想$\ideal{q}\subsetneqq \ideal{p}$使得$\ideal{q}$与$\ideal{p}$之间没有别的素理想, 即在多项式函数整环$A{\divslash}\ideal{q}$中有$h(\ideal{p}{\divslash}\ideal{q})=1$. 根据\thref{prop:heightoneideallemma}和\thref{prop:thirdisomorphism}, 有$\dim (A)-\codim (\ideal{q})=k-1$, 再由归纳假设得$h(\ideal{q})=\dim (A)-\codim (\ideal{p})-1$, 因此$h(\ideal{p})\geq h(\ideal{q})+1 = \dim (A)-\codim (\ideal{p})$, 得证.

    \ref{enum:thm-ringdim-depth} 对$\codim (\ideal{p})$进行归纳. 当$\codim (\ideal{p})=0$时, 由\thref{prop:primeidealdim}知$\ideal{p}$一定为极大理想, 因此$d(\ideal{p})=0$, 结论成立. 假设对于任意满足条件的$A$和$\ideal{p}$以及$k\in\ZZ_+$, 当$\codim(\ideal{p})<k$时结论成立, 考虑$\codim(\ideal{p})=k$的情况, 不妨假设$k\leq \dim (A)$. 首先由\thref{prop:primeidealdim}得 $0\leq\codim (\ideal{p}_0)<\codim (\ideal{p}_1)<\dotsb <\codim (\ideal{p}_{d-1})<\codim (\ideal{p})$, 因此$d(\ideal{p})\leq \codim (\ideal{p})$. 另一方面, 考虑多项式函数整环$A{\divslash}\ideal{p}$中的一个高度为一的素理想$\ideal{q}{\divslash}\ideal{p}$, 根据\thref{prop:heightoneideallemma}和\thref{prop:thirdisomorphism}, 有$\codim (\ideal{q})=k-1$, 再由归纳假设得$d(\ideal{q})=\codim (\ideal{q})$, 故$d(\ideal{p})\geq d(\ideal{q})+1=\codim (\ideal{q})$, 得证.
\end{proof}

利用维数理论我们可以证明Hilbert零点定理, 它建立了代数与几何之间的联系. 我们先来证一个简单的引理.

\begin{proposition}[{{\parencite[195, Corollary 3]{zariski_commutative_1960}}}]\label{prop:ringdimprimeidealexist}
    设$A$为$\kk$的多项式函数整环, $\dim (A)=r$, 则分别存在余维数为$0, 1, \dotsc, r$的素理想.
\end{proposition}

\begin{proof}
    根据\thref{thm:ringdim}有$\codim (0)=d((0))=r$. 考虑素理想降链$A\supsetneqq \ideal{p}_0\supsetneqq \dotsb\supsetneqq \ideal{p}_r=(0)$, 因为$0\leq \codim (\ideal{p}_0)< \dotsb <\codim (\ideal{p}_r)=r$, 所以对于$j=0, \dotsc, r$一定有$\codim (\ideal{p}_j)=j$, 得证.
\end{proof}

\begin{theorem}[弱Hilbert零点定理{{\parencite[82, Proposition 7.9]{atiyah_introduction_1969}}}]\label{thm:hilbert-nullstellensatz-weak}
    设$\field{k}$是域, $A$为$\field{k}$的多项式函数整环, 如果$A$也是域, 则$A$为$\field{k}$的有限代数域扩张. 特别地, 如果$\field{k}$为代数闭域, $A$为有限生成$\kk$-代数, $\ideal{m}$为$A$的极大理想, 则$A/\ideal{m}\cong \field{k}$.
\end{theorem}

\begin{proof}
    因为域只有$(0)$素理想, 余维数为0, 所以根据\thref{prop:ringdimprimeidealexist}知, 域扩张$\kk\subseteq A$的超越次数为0, 即为代数域扩张. 又$A$为有限生成$k$-代数, 故为有限代数域扩张.
\end{proof}

% 接下来我们来证明重要的Hilbert零点定理, 它建立了代数与几何联系的根基. 首先我们需要几个引理.

% \begin{proposition}[Artin-Tate引理{{\parencites[81, Proposition 7.8]{atiyah_introduction_1969}[Theorem 1]{artin_note_1951}}}]
%     设环$A\subseteq B\subseteq C$, 其中$A$为Noether环, $C$为有限生成$A$-代数, $C$同时也为有限$B$-代数, 则$B$为有限生成$A$-代数.
% \end{proposition}

% \begin{proof}

% \end{proof}

% \begin{theorem}[弱Hilbert零点定理{{\parencites[82, Proposition 7.9]{atiyah_introduction_1969}[Theorem 2]{artin_note_1951}}}]
%     设$\field{k}$是域, $E$为$\field{k}$的有限生成代数, 如果$E$也是域, 则$E$为$\field{k}$的有限代数域扩张. 特别地, 如果$\field{k}$为代数闭域, $A$为$\field{k}$的有限生成代数, $\ideal{m}$为$A$的极大理想, 则$A/\ideal{m}\cong \field{k}$.
% \end{theorem}

% \begin{proof}
% %TODO: rewrite module and noetherian module
% \end{proof}

在唯一分解整环中, 利用素元和不可约元的等价性, 可以得到高度为一的素理想一定是主理想, 并且可以由一个素元生成\parencite[174, Exercise 21.32]{altman_term_2017}. 我们将要在Noether整环的情况下推广这一结论, 并应用维数理论证明\thref{prop:heightoneideallemma}的逆命题成立.

\begin{theorem}[Krull主理想定理{{\parencite[238, Theorem 29]{zariski_commutative_1958}}}]\label{thm:krullhauptidealsatz}
    设$(f)$为Noether整环$A$的一个非零真主理想, $\ideal{p}$为$(f)$的一个孤立从属素理想, 则$h(\ideal{p})=1$.
\end{theorem}

% 域的超越指数; Jacobson Vol II P514
% height and depth; Zariski Vol I 似乎只有定义啊 P240
% Krull's Hauptidealsatz; Zariski Vol I followed by height and depth
% minimal ideal theorem; Zariski Vol II

\subsection{齐次环与齐次理想}

% TODO: contents
% Noetherian homogeneous ideal can be generated by finite number of homogeneous elements
% irrelevant maximal ideal
% quotient and localization
% primary decomposition

\subsection{素谱}\label{subsec:primespec}

这一节我们要介绍环的素谱及其上的Zariski拓扑结构, 它具有很好的函子性质, 也可以反映出一些环本身的性质.

设$X$为环$A$的素理想全体构成的集合. 对每个$A$的子集$E$, 记$V(E)$为$A$中包含$E$的素理想全体, 是$X$的子集.

\begin{proposition}[{{\parencite[12, Exercise 15]{atiyah_introduction_1969}}}]\label{prop:primespecclosedset}
    上述定义的算子$V$有如下性质,
    \begin{enumerate}
        \item\label{enum:prop-prime-spec-closed-set-1} 如果$\ideal{a}$是由$A$的子集$E$生成的理想, 则$V(E)=V(\ideal{a})=V(\sqrt{\ideal{a}})$;
        \item\label{enum:prop-prime-spec-closed-set-2} 如果$\sqrt{\ideal{a}}\neq\sqrt{\ideal{b}}$, 则$V(\ideal{a})\neq V(\ideal{b})$;
        \item\label{enum:prop-prime-spec-closed-set-3} $V((0))=X$, $V((1))=\varnothing$;
        \item\label{enum:prop-prime-spec-closed-set-4} 设$\{E_\lambda\}$为$A$的一族子集, 则$\bigcap V(E_\lambda)=V(\bigcup E_\lambda)$;
        \item\label{enum:prop-prime-spec-closed-set-5} 如果$\ideal{a}, \ideal{b}$是$A$的两个理想, 则$V(\ideal{a})\cup V(\ideal{b})=V(\ideal{ab})= V(\ideal{a}\cap \ideal{b})$.
    \end{enumerate}
    因此$V(E)$全体作为$X$的子集满足拓扑空间中闭集的公理, 如此可以在$X$中定义拓扑空间结构, 称为\emph{Zariski拓扑}, 称赋有Zariski拓扑的拓扑空间$X$为环$A$的\emph{素谱}, 记为$\Spec (A)$.
\end{proposition}

\begin{proof}
    \ref{enum:prop-prime-spec-closed-set-1} 注意如果$x^n\in \ideal{p}$那么有$x\in\ideal{p}$.

    \ref{enum:prop-prime-spec-closed-set-5} 不难证明$V(\ideal{a}\cap\ideal{b})=V(\ideal{a})\cup V(\ideal{b})$, 又由\ref{enum:prop-prime-spec-closed-set-1}和\thref{prop:idealop}\ref{enum:prop-idealop-rad-inters}, 即得$V(\ideal{a})\cup V(\ideal{b})=V(\ideal{ab})= V(\ideal{a}\cap \ideal{b})$.
\end{proof}

素谱$\Spec (A)$有一组很特殊的拓扑基, 我们现在来介绍.

\begin{proposition}[{{\parencite[12, Exercise 17]{atiyah_introduction_1969}}}]\label{prop:primespecbaseopenset}
    对于$f\in A$, 记$X_f$为闭集$V((f))$的余集. 则这些$X_f$构成$\Spec (A)$的一组拓扑基, 并且满足
    \begin{enumerate}
        \item $X_f\cap X_g=X_{fg}$;
        \item\label{enum:prop-prime-spec-base-open-set-2} $X_f=\varnothing$当且仅当$f$是幂零元;
        \item $X_f=X$当且仅当$f$是单位;
        \item $X_f=X_g$当且仅当$\sqrt{(f)}=\sqrt{(g)}$;
        \item\label{enum:prop-prime-spec-base-open-set-5} $X$是拟紧集\footnotemark;
        \item\label{enum:prop-prime-spec-base-open-set-6} 每个$X_f$是拟紧集;
        \item $X$中的开集为拟紧集当且仅当它是有限个$X_f$的并.
    \end{enumerate}
    称这些$X_f$为素谱$\Spec (A)$的\emph{基开集}.
\end{proposition}
\footnotetext{代数几何中对紧集的称法与其它领域中不同. 称每个开覆盖都有有限子覆盖的集合为\emph{拟紧集}, 称满足Hausdorff性质的拟紧集为\emph{紧集}.}

\begin{proof}
    \ref{enum:prop-prime-spec-base-open-set-2} $X_f=\varnothing$当且仅当$f$属于$A$的幂零根, 也当且仅当$f$是幂零元.

    \ref{enum:prop-prime-spec-base-open-set-5} 考虑一族$\{f_\lambda\}_{\lambda\subseteq \Lambda}$, 则利用集合运算的性质, 我们有$\bigcup X_{f_\lambda}=X$当且仅当$X-(\bigcap V(f_\lambda))=X$, 也当且仅当$V(\bigcup (f_\lambda))=\varnothing$, 也当且仅当$V((\{f_\lambda\}))=\varnothing$, 也当且仅当$(\{f_\lambda\})=(1)$. 根据生成理想的定义, 如果$(\{f_\lambda\})=(1)$, 则存在有限子集$J$使得$(\{f_j\}_{j\in J})=(1)$, 于是$\bigcup X_{f_j}=X$, 即得证任意开覆盖都有有限子覆盖.

    \ref{enum:prop-prime-spec-base-open-set-6} 先证明$\bigcup X_{f_\lambda}\supseteq X_f$当且仅当$(\{f_\lambda\})\supseteq (f)$, 再找$\sum_{j=1}^n f_ig_i = f$, 于是有有限子覆盖$\{f_1, \dotsc, f_n\}$.
\end{proof}

如果非空拓扑空间$X$不能写成两个真闭子空间的并, 则称$X$是\emph{不可约的}, 这等价于$X$中任意两个非空开集都有非空交, 也等价于$X$中每个非空开集都是稠密的\parencite[13, Exercise 19]{atiyah_introduction_1969}. 称$X$的子集$Y$不可约当且仅当$Y$的子拓扑结构是\emph{不可约的}. 为了叙述方便, 我们不认为空集是不可约的.

\begin{proposition}[{{\parencite[13, Exercise 20]{atiyah_introduction_1969}}}]
    拓扑空间$X$的不可约集全体在集合包含关系定义的偏序集结构有极大元, 这些极大元都是闭集, 并且它们的并为全空间. 称这些极大元为$X$的\emph{不可约分支}.
\end{proposition}

\begin{proof}
    先利用Zorn引理证明有极大元. 考虑不可约集的全序子链$\{Y_\lambda\}$, 则断言它们的并$Y$一定是不可约集. 这是因为对于每两个$Y$的真闭子集$Z_1, Z_2$, 都可以找到$\lambda$使得$Z_1\cap Y_\lambda, Z_2\cap Y_\lambda$是$Y_\lambda$的真闭子集.

    再证明不可约集的闭包仍然是不可约集, 于是极大元一定是闭集. 设$Y$为不可约集, 考虑$\overline{Y}$中的非空开子集$U_1, U_2$, 则$U_1\cap Y, U_2\cap Y$是$Y$的非空开子集, 有非空交, 故$U_1, U_2$也有非空交.

    最后根据定义知, 单点集一定是不可约集, 所以这些极大元的并一定是全空间.
\end{proof}

\begin{proposition}[{{\parencite[13, Exercise 20]{atiyah_introduction_1969}}}]
    素谱$X=\Spec (A)$的不可约闭集全体恰为素理想$\ideal{p}$对应的闭集$V(\ideal{p})$全体, 由此建立了$X$的不可约闭集全体到$A$的素理想全体的反序双射. 于是$X$不可约分支全体恰为极小素理想$\ideal{p}$所对应的闭集$V(\ideal{p})$全体.
\end{proposition}

\begin{proof}
    因为$V$可以看成从$A$的素理想全体到$X$的闭集全体之间的保序单射, 所以只需证明$\sqrt{\ideal{a}}$为素理想当且仅当$V(\ideal{a})$不可约.

    如果$\ideal{p}$是素理想, 若有$V(\ideal{p})=V(\sqrt{\ideal{a}})\cup V(\sqrt{\ideal{b}})=V(\sqrt{\ideal{ab}})$, 则根据\thref{prop:primespecclosedset}\ref{enum:prop-prime-spec-closed-set-2}有$\ideal{p}=\sqrt{\ideal{ab}}=\sqrt{\ideal{a}}\cap\sqrt{\ideal{b}}$, 再根据\thref{prop:prime}\ref{enum:prop-prime-absorb}得$\ideal{p}=\sqrt{\ideal{a}}$或$\ideal{p}=\sqrt{\ideal{b}}$. 于是得$V(\ideal{p})$不能写成两个真闭子集得并, 故为不可约集.

    如果$V(\sqrt{\ideal{a}})$是不可约集, 考虑$fg\in\sqrt{\ideal{a}}$. 则$V(\ideal{a})=(V(\ideal{a})\cap V((f)))\cap (V(\ideal{a})\cap V((g)))$可以写成两个闭子集的并. 于是有$V(\ideal{a})=V((f))$或者$V(\ideal{a})=V((g))$, 因此$f\in \sqrt{\ideal{a}}$或者$g\in \sqrt{\ideal{a}}$成立, 即$\sqrt{\ideal{a}}$为素理想.
\end{proof}

素谱运算实际上是环范畴到拓扑空间范畴的反变函子, 具有如下一些性质.

\begin{proposition}[{{\parencite[13, Exercise 21]{atiyah_introduction_1969}}}]\label{prop:primespecfunctor}
    设$\varphi\colon A\to B$为环同态, 记$X=\Spec (A)$, $Y=\Spec (B)$. $\varphi$诱导出了拓扑空间之间的映射$\varphi^*\colon Y\to X$, 满足
    \begin{enumerate}
        \item\label{enum:prop-prime-spec-functor-continuous} 如果$f\in A$, 那么$\varphi^{*-1}(X_f)=Y_{\varphi(f)}$. 因此$\varphi^*$是连续映射;
        \item 如果$\ideal{a}$是$A$的理想, 那么$\varphi^{*-1}(V(\ideal{a}))=V(\ideal{a}^e)$;
        \item 如果$\ideal{b}$是$B$的理想, 那么$\overline{\varphi^*(V(\ideal{b}))}=V(\ideal{b}^c)$;
        \item\label{enum:prop-prime-spec-functor-surjective} 如果$\varphi$是满射, 那么$\varphi^*$为从$Y$到$X$的闭子集$V(\Ker (\varphi))$的同胚. 特别地, $\Spec (A)$与$\Spec (A{\divslash}\nil)$有自然同胚;
        \item $\varphi^*(Y)$在$X$中稠密当且仅当$\Ker (\varphi)\subseteq \nil$;
        \item\label{enum:prop-prime-spec-functor-composite} 如果$\psi\colon B\to C$为另一个环同态, 则$(\psi\circ\varphi)^*=\varphi^*\circ\psi^*$.
    \end{enumerate}
\end{proposition}

\begin{proof}
    \ref{enum:prop-prime-spec-functor-continuous} $\ideal{q}\in\varphi^{*-1}(V(X_f))$当且仅当$\varphi^*(\ideal{q})\in X_f$, 又当且仅当$f\notin \ideal{q}^c$, 还当且仅当$\varphi (f)\notin \ideal{q}$, 最后当且仅当$\ideal{q}\in Y_{\varphi (f)}$.

    \ref{enum:prop-prime-spec-functor-surjective} 只需证明$\varphi^*(V(\ideal{b}))=V(\ideal{b}^c)$. 考虑素理想$\ideal{p}\in X$, 则$\ideal{p}\in\varphi^*(V(\ideal{b}))$当且仅当$\varphi(\ideal{p})\in V(\ideal{b})$, 也当且仅当$\varphi(\ideal{p})\supseteq\ideal{b}$, 故当且仅当$\ideal{p}\supseteq\ideal{b}^c$.

    \ref{enum:prop-prime-spec-functor-composite} 注意$(\psi\circ\varphi)^{-1}=(\varphi^{-1}\circ\psi^{-1})$即可.
\end{proof}

对于环$A$, 其极大理想全体可以看成素谱$\Spec (A)$的子空间, 这个子空间被称为$A$的\emph{极大谱}, 记作$\MaxSpec (A)$. 因为一般来说极大理想的原像不一定是极大理想, 所以极大谱没有如\thref{prop:primespecfunctor}中所述的函子性质, 研究起来不是那么方便.

正如Noether环在环论中的作用, 我们也希望研究带有某种有限条件的拓扑空间. 如果拓扑空间$X$满足关于闭子集的降链条件, 即对于任意的闭集降链$Y_1\supseteq Y_2\supseteq\dotsb$都存在$n$使得$Y_n=Y_{n+1}=\dotsb$, 则称$X$为\emph{Noether拓扑空间}. 对偶地, $X$为Noether拓扑空间当且仅当$X$满足关于开子集的升链条件, 因而Noether拓扑空间总是拟紧的\parencite[79, Exercise 5]{atiyah_introduction_1969}.

\begin{proposition}
    如果$A$是Noether环, 则$\Spec (A)$是Noether拓扑空间. 反之则不一定成立.
\end{proposition}

\begin{proof}
    假设$A$是Noether环, 因为$\Spec (A)$中的闭集降链能诱导出$A$中的根式理想的升链, 故由\thref{prop:primespecclosedset}\ref{enum:prop-prime-spec-closed-set-2}知闭集降链一定有限.

    反过来, 我们需要寻找一个反例, 这个反例参考\parencite{brandenburg_non-noetherian_2017}. 设$\kk$为一个域, 考虑域的正整数元多项式环的商环$A=\kk [X_1, X_2, \dotsc]{\divslash}(X_1, X_2^2, \dotsc)$. 因为理想升链$(X_1)\subsetneqq (X_1, X_2)\dotsb$不稳定, 因此$A$不是Noether环. 但是因为幂零根$\nil=\ideal{m}\coloneq (X_1, X_2, \dotsc)$为极大理想, 故由\thref{prop:primespecfunctor}\ref{enum:prop-prime-spec-functor-surjective}我们知道$\Spec (A)\cong\Spec (A{\divslash}\nil)=\Spec (\kk)$仅有一个点, 因此一定是Noether拓扑空间.
\end{proof}

\begin{proposition}[{{\parencites[79, Exercise 7]{atiyah_introduction_1969}[5, Proposition 1.5]{hartshorne_algebraic_1977}}}]
    Noether拓扑空间$X$中的不可约分支仅有有限个, 故Noether环$A$的极小素理想仅有有限个.
\end{proposition}

\begin{proof}
    不会了, 参考Lasker-Noether定理的证明吧.
\end{proof}

% TODO: 代数闭域
